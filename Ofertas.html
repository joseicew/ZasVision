<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ofertas</title>

    <script src="https://www.gstatic.com/firebasejs/5.5.6/firebase.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <style>
        .zas1 {
            color: #E6B10E;
        }
        
        .zas2 {
            color: #51B2B5;
        }
        
        .bg-zas1 {
            background-color: #E6B10E;
        }
        
        .bg-zas2 {
            background-color: #51B2B5;
        }
        
        .zas3 {
            color: #5B8081;
        }
        
        .bg-zas3 {
            background-color: #5B8081;
        }
        
        .error_alert {
            flex: 0 1 auto;
            align-self: auto;
        }
    </style>
    



</head>

<body class="container bg-zas3">
    <div class="d-flex justify-content-center m-0 p-0">
        <img src="https://previews.dropbox.com/p/thumb/AAPxYgJCetNUof1IzOYwDocjxjARxsR1EDo0IcJhjvZE9HVuKUt4KasKUVYF0z24gJoUJhWndELeYH0XD6ULS1OdlnZTvtPUyRoxLP0Yv2JDHeSvpBrCcK4Uh4InOgXvrBwbv3uyu0bn_YR_y5y5rR6jhxL68uC9DHhKaKDsU7-P6Q/p.png?size=1600x1200&size_mode=3"
            alt="" class="h-100 m-4 col-5">

    </div>

    <div class="p-4 row col-8 m-auto bg-zas1 rounded row" id="input">
        <h2 class="text-center col-12">Ofertas</h2>

        <progress class="col-12 mb-4" value="0" max="100" id="uploader"></progress>
        <input class="col-12 w-100 mb-4" type="file" value="upload" id="fileButton" />

        <div class="col-12" id="info"></div>
    </div>

    <script>
        // Initialize Firebase
        var config = {

            apiKey: "AIzaSyAqXqfiKPCNTCfVOgdaZTiOqCbuVk2yO-M",
            authDomain: "zasvision-86b04.firebaseapp.com",
            databaseURL: "https://zasvision-86b04.firebaseio.com",
            projectId: "zasvision-86b04",
            storageBucket: "zasvision-86b04.appspot.com",
            messagingSenderId: "1092098673609"
        };

        firebase.initializeApp(config);

        //Get elements
        var uploader = document.getElementById("uploader");
        var fileButton = document.getElementById("fileButton");
        
        fileButton.addEventListener('change', function (e){
            var file = e.target.files[0];

            var storageRef = firebase.storage().ref('ofertas/oferta.jpg');

            var task = storageRef.put(file);

            task.on('state_changed' ,
                
                function progress(snapshot){
                    var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100 ; 
                    uploader.value = percentage;
                },
                function error(err){
                    document.getElementById("info").innerHTML = "<div class=\"alert alert-danger alert-dismissible error_alert fade show\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><strong>¡Error!</strong> No se pudo subir la imagen. </div>";
                },
                function complete(){
                    document.getElementById("info").innerHTML = "<div class=\"alert alert-success alert-dismissible error_alert fade show\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><strong>¡Completo!</strong> La imagen se subió con éxito</div>";

            });
        })

    </script>

</body>

</html>